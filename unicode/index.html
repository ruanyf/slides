
<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	<title>Unicode and ECMAScript 6</title>
	
	<link href="../csss/slideshow.css" rel="stylesheet" />
	<link href="../csss/theme.css" rel="stylesheet" />
	<link href="css/talk.css" rel="stylesheet" />
	<script src="../csss/prefixfree.min.js"></script>
</head>
<body data-duration="35">

<header id="intro" class="slide slide-intro util-cover">
	<h1>
		Unicode ä¸ ES6
	</h1>
	<p class="attribution">by é˜®ä¸€å³°</p>
</header>
<section>
	<header class="inverse slide slide-who util-cover">
		<h2 class="util-round-corner">Who am I?</h2>
    <ul class="delayed util-round-corner util-left">
      <li>ä»¥å‰æ˜¯è€å¸ˆ</li>
      <li>ç°åœ¨Alipay.comå·¥ä½œ</li>
    </ul>
    <ul class="delayed util-round-corner util-left">
      <li>ã€Šè½¯ä»¶éšæƒ³å½•ã€‹ã€ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹çš„è¯‘è€…</li>
      <li>ã€ŠECMAScript 6å…¥é—¨ã€‹ã€ã€Šå¦‚ä½•å˜å¾—æœ‰æ€æƒ³ã€‹çš„ä½œè€…</li>
    </ul>
    <div>
      <img class="delayed slide-who-book1" src="image/book1.jpg" />
      <img class="delayed slide-who-book2" src="image/book2.jpg" />
      <img class="delayed slide-who-book3" src="image/book3.jpg" />
      <img class="delayed slide-who-book3" src="image/book4.jpg" />
    </div>
	</header>
	
	<section class="slide slide-definition util-cover" title="what is unicode?">
		<dl class="util-shadow-area util-round-corner">
      <dt>Unicode</dt> 
      <dd>a computing industry standard for providing a unique code point â€” a number â€” for each character.  <cite>(from wikipedia)</cite></dd>
    </dl>
	</section>
	
	<section class="slide slide-encoding util-cover">
		<h2>Unicodeç¼–å·è§„åˆ™</h2>
		<ul class="delayed">
			<li>ä»0å¼€å§‹ç¼–å· u+0000 = null</li>
      <li>æœ€æ–°7.0ç‰ˆ</li>
      <li>å…±è®¡109449ä¸ªç¬¦å·ï¼ŒåŒ…å«cjkå­—ç¬¦74500ä¸ªï¼ˆ68%ï¼‰</li>
    </ul>
    <ul class="delayed">
      <li>2<sup>16</sup>ï¼ˆ65536ï¼‰ä¸ªå·ç ç»„æˆä¸€ä¸ªå¹³é¢(plain)</li>
      <li>ç›®å‰å…±æœ‰17ä¸ªå¹³é¢ï¼Œæ•´ä¸ªç©ºé—´å¤§å°ï¼š2<sup>21</sup></li>
      <li>1ä¸ªåŸºæœ¬å¹³é¢ï¼ˆBMPï¼‰ï¼šU+0000ï½U+FFFF</li>
      <li>16ä¸ªè¾…åŠ©å¹³é¢ï¼ˆSMPï¼‰ï¼šU+010000ï½U+10FFFF</li>
    </ul>
	</section>
	
	<section class="slide slide-utf32" id="navigation">
		<h2>UTF-32ç¼–ç </h2>
		<p>4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œ</p>
    <p>å®Œå…¨å¯¹åº”Unicodeç¼–ç ï¼Œ</p>
    <p>æ¯”å¦‚ï¼Œå­—æ¯aä¸º0x00000061</p>
		<ul>
      <li>Proï¼šæŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œæ—¶é—´å¤æ‚åº¦<em>o(1)</em></li>
			<li>Conï¼šæµªè´¹ç©ºé—´ï¼Œæ¯”ç›¸åŒASCIIç¼–ç æ–‡ä»¶å¤§å››å€</li>
 		</ul>
	</section>

 	<section class="slide slide-request util-cover">
    <h2>æˆ‘ä»¬éœ€è¦ä¸€ç§<br />èŠ‚çœç©ºé—´çš„<br />è¡¨ç¤ºæ³•ï¼</h2>
  </section>

 	<section class="slide slide-utf8">
    <h2>UTF-8ç¼–ç </h2>
    <p>å˜é•¿ç¼–ç æ³•ï¼Œ</p>
    <p>é•¿åº¦ä¸º1ï½4ä¸ªå­—èŠ‚</p>
    <table>
      <thead>
        <tr><td>ç¼–å·èŒƒå›´</td><td>å­—èŠ‚</td></tr>
      </thead>
      <tbody>
        <tr><td>0x0000 â€“ 0x007F</td><td>1</td></tr>
        <tr><td>0x0080 â€“ 0x07FF</td><td>2</td></tr>
        <tr><td>0x0800 â€“ 0xFFFF</td><td>3</td></tr>
        <tr><td>0x010000 â€“ 0x10FFFF</td><td>4</td></tr>
      </tbody>      
    </table>
  </section>

  <section class="slide slide-utf16">
    <h2>UTF-16ç¼–ç </h2>
    <p>å˜é•¿ç¼–ç æ³•ï¼Œ</p>
    <p>é•¿åº¦ä¸º2ä¸ªå­—èŠ‚æˆ–4ä¸ªå­—èŠ‚</p>
    <table>
      <thead>
        <tr><td>ç¼–å·èŒƒå›´</td><td>å­—èŠ‚</td></tr>
      </thead>
      <tbody>
        <tr><td>0x0000 â€“ 0xFFFF</td><td>2</td></tr>
        <tr><td>0x010000 â€“ 0x10FFFF</td><td>4</td></tr>
      </tbody>      
    </table>
  </section>

  <section class="slide slide-utf16-encoding">
    <h2>utf-16ç¼–ç è§„åˆ™</h2>
    <ul>
    <li>unicodeç¼–å· 0xD800 ~ 0xDFFF ä¸ºç©ºæ®µ</li>
    <li>ç¼–å·å¤§äº 0xFFFF çš„å­—ç¬¦
    <ul>
      <li>å‰åŠæ®µæ˜ å°„åœ¨ 0xD800 ~ 0xDBFFï¼ˆç©ºé—´å¤§å°2<sup>10</sup>ï¼‰</li>
      <li>ååŠæ®µæ˜ å°„åœ¨ 0xDC00 ~ 0xDFFFï¼ˆç©ºé—´å¤§å°2<sup>10</sup>ï¼‰</li>
    </ul>
    </li>
    </ul>
  </section>

  <section class="slide slide-utf16-formula">
    <h2>è½¬ç å…¬å¼</h2>
    <pre><code lang="javascript">
    H = Math.floor((c-0x10000) / 0x400)+0xD800

    L = (c - 0x10000) % 0x400 + 0xDC00
    </code></pre>
  </section>

  <section class="slide slide-utf16-example">
    <style scoped>
      div {
        font-size: 700%;
      }
      h2, div{
        margin: 0 auto;
        text-align: center;
      }
    </style>
    <h2>U+1D306</h2>
    <div>ğŒ†</div>
  </section>

  <section class="slide slide-utf16-example2">
     <pre><code lang="javascript">  
    H = Math.floor((0x1D306-0x10000)/0x400)+0xD800
      = 0xd834

    L = (0x1D306-0x10000) % 0x400+0xDC00
      = 0xDF06
     </code></pre>
     <h2>0xD834 0xDF06</h2>
  </section>

</section>

<section>
	<header class="slide slide-question util-cover">
    <style scoped>
      h1{
        width: 40%;
        font-size: 2.5em;
        line-height: 1.5;
      }
    </style>
		<h1>Which encoding method does JavaScript use?</h1>
	</header>
	
	<section class="slide slide-answer">
    <h1 class="delayed">None!</h1>
    <h2 class="delayed">JavaScript uses UCS-2!</h2>
	</section>
	
	<section class="slide slide-history util-cover">
		<h2 class="util-shadow-area util-round-corner">Some History</h2>
		<div class="util-shadow-area util-round-corner">
      <p>å¤ä»£ï¼Œæœ‰ä¸¤ä¸ªå›¢é˜ŸåŒæ—¶æâ€œç»Ÿä¸€å­—ç¬¦é›†â€</p>
      <ul>
      <li>Unicodeå›¢é˜Ÿï¼ˆsince 1988ï¼‰</li>
      <li>UCSå›¢é˜Ÿï¼ˆsince 1989ï¼‰</li>
      </ul>
      <p>1991å¹´10æœˆï¼Œä¸¤ä¸ªå›¢é˜Ÿå†³å®šåˆå¹¶å­—ç¬¦é›†ã€‚</p> 
    </div>
	</section>
	
	<section class="slide slide-timeline">
		<h2>Timeline</h2>
		<ul>
      <li>1990ï¼Œ    UCS-2ç¼–ç å‘å¸ƒï¼ˆåªæ”¯æŒ16ä½ï¼‰</li>
      <li>1995.5ï¼Œ   JavaScriptè¯ç”Ÿ</li>
      <li>1995.10ï¼Œ  ç¬¬ä¸€ä¸ªJavaScriptè§£é‡Šå™¨</li>
      <li>1996.7ï¼Œ   UTF-16å‘å¸ƒï¼Œå–ä»£UCS-2</li>
      <li>1996.11ï¼Œ  Netscopeæäº¤JavaScriptæ ‡å‡†</li>
    </ul>
	</section>
	
	<section class="slide slide-conclusion">
		<style scoped>
			h2 {
				font-size: 200%;
				font-weight: bold;
			}
      ul{
        font-size: 150%;
      }
		</style>
		<h2>å°ç»“</h2>
    <ul>
      <li>JavaScripté‡‡ç”¨Unicodeå­—ç¬¦ç¼–ç </li>
      <li>åªæ”¯æŒ16ä½Unicodeå­—ç¬¦</li>
    </ul>  
	</section>

    <section class="slide slide-utf16-example">
    <style scoped>
      div {
        font-size: 700%;
      }
      h2, div{
        margin: 0 auto;
        text-align: center;
      }
    </style>
    <h2>U+1D306</h2>
    <div>ğŒ†</div>
  </section>
	
	<section class="slide slide-char-error">
		<pre><code lang="javascript">
    'ğŒ†'.length     
    // 2
    'ğŒ†'==='\u1D306'     
    // false
    'ğŒ†'.charAt(0)      
    // " "
    'ğŒ†'.charCodeAt(0)    
    // 55348ï¼ˆ0xD834ï¼‰ 
    </code></pre>
	</section>
	
	<section class="slide slide-equation">
    <style scoped>
      h1{
        text-align: center;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 95%;
        font-size: 130%;
      }
    </style>
    <h1 class="util-round-corner"><pre><code lang="javascript">
    'ğŒ†' === '\uD834\uDF06'
    </code></pre></h1>
	</section>

  <section class="slide slide-es5-hack">
    <h2>Hackï¼šéå†å­—ç¬¦ä¸²</h2>
    <pre><code lang="javascript">
    while (++index < length) {
      // ...
      if (charCode >= 0xD800 && charCode <= 0xDBFF) {
        output.push(character + string.charAt(++index));
      } else {
        output.push(character);
      }
    }
    </code></pre>    
  </section>

  <section class="slide slide-problems">
    <h2>Similar Problems</h2>
    <ul>
      <li>String.prototype.replace()</li>
      <li>String.prototype.substring()</li>
      <li>String.prototype.slice()</li>
      <li>...</li>
    </ul>
  </section>  
</section>

<section>
	<section class="slide slide-es6-welcome util-cover">
    <style scoped>
      h1{
        width: 45%;
        font-size: 300%;
        font-weight: bold;
      }
    </style>
		<h1>Now, we have ES6!</h1>
	</section>
	
	<section class="slide slide-es6-way">
		<h2>éå†å­—ç¬¦ä¸²ï¼šES6's way</h2>
		<pre><code lang="javascript">
    for (let s of string ) {
      // ...
    }
    </code></pre>
	</section>
	
	<section class="slide slide-length">
		<h2>å­—ç¬¦ä¸²é•¿åº¦</h2>
		<pre><code lang="javascript">
    function codePointLength(string) {
      return Array.from(string).length;
    }
    </code></pre>
	</section>
	
	<section class="slide slide-expression">
		<h2>Unicodeå­—ç¬¦è¡¨ç¤ºæ³•</h2>
		<pre><code lang="javascript">
    'ğŒ†'==='\u1D306' // false

    'ğŒ†'==='\u{1D306}' // true    
    </code></pre>
	</section>
	
	<section class="slide slide-functions">
		<h2>å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</h2>
		<ul>
      <li>String.fromCodePoint()</li>
      <li>String.prototype.codePointAt()</li>
      <li>String.prototype.at()</li>
		</ul>
	</section>
	
	<section class="slide slide-regular">
		<h2>æ­£åˆ™è¡¨è¾¾å¼</h2>
		<pre><code lang="javascript">
    /^.$/.test('ğŒ†') // false

    /^.$/u.test('ğŒ†') // true    
    </code></pre>
	</section>
	
  <section class="slide slide-composition">
    <style scoped>
      div {
        font-size: 700%;
      }
      h2, div{
        margin: 0 auto;
        text-align: center;
      }
    </style>
    <h2>åˆæˆå­—ç¬¦</h2>
    <div>Ç‘</div>
  </section>

	<section class="slide slide-composition-method">
		<h2>Unicodeæä¾›çš„ä¸¤ç§æ–¹æ³•</h2>
		<ul>
      <li>æ–¹æ³•ä¸€ï¼šå•ä¸ªå­—ç¬¦</li>
      <pre><code lang="javascript">Ç‘ï¼ˆ\u01D1ï¼‰</code></pre>
      <li>æ–¹æ³•äºŒï¼šå­—ç¬¦åˆæˆ</li>
      <pre><code lang="javascript">Oï¼ˆ\u004Fï¼‰ + Ë‡ï¼ˆ\u030Cï¼‰</code></pre>
		</ul>
	</section>
	
	<section class="slide slide-normalize">
		<h2>Unicodeæ­£è§„åŒ–</h2>
		<pre><code lang="javascript">
      '\u01D1'==='\u004F\u030C' 
      //false
      '\u01D1'.normalize() === '\u004F\u030C'.normalize() 
      // true
    </code></pre>
	</section>
</section>
<section class="slide slide-thanks util-cover" title="The End">
  <style scoped>
    h1{
      width: 30%;
      font-size: 250%;
      color: #D35400;
      float: right;
    }
  </style>
	<h1>Thanks for your time!</h1>
</section>

<footer class="slide slide-end">
  <style scope>
  .item:not(.current){
    display:none;
  }
  .item{
    position: absolute;
    top:50%;
    transform: translate(-50%,-50%);
    left: 50%;
  }
  </style>
  <h2 class="item delayed">Wanna watch again?</h2>
  <p class="item delayed">slides.ruanyifeng.<br />com/unicode/</p>
  <h2 class='item delayed'>Wanna learn more ES6?</h2>
  <p class="item delayed">es6.ruanyifeng.com</p>
  <h2 class="item delayed">Follow me @ruanyf</h2>
    
</footer>

<script src="../csss/slideshow.js"></script>
<script src="../csss/plugins/css-edit.js"></script>
<script src="../csss/plugins/css-snippets.js"></script>
<script src="../csss/plugins/css-controls.js"></script>
<script src="../csss/plugins/code-highlight.js"></script>
<script>
var slideshow = new SlideShow();

var snippets = document.querySelectorAll('.snippet');
for(var i=0; i<snippets.length; i++) {
	new CSSSnippet(snippets[i]);
}

var cssControls = document.querySelectorAll('.css-control');
for(var i=0; i<cssControls.length; i++) {
	new CSSControl(cssControls[i]);
}
</script>
	
</body>
</html>
